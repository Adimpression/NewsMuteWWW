(function(window,angular,undefined){"use strict";MdSwitch.$inject=["mdCheckboxDirective","$mdUtil","$mdConstant","$parse","$$rAF","$mdGesture","$timeout"];angular.module("material.components.switch",["material.core","material.components.checkbox"]).directive("mdSwitch",MdSwitch);function MdSwitch(mdCheckboxDirective,$mdUtil,$mdConstant,$parse,$$rAF,$mdGesture,$timeout){var checkboxDirective=mdCheckboxDirective[0];return{restrict:"E",priority:210,transclude:true,template:'<div class="md-container">'+'<div class="md-bar"></div>'+'<div class="md-thumb-container">'+'<div class="md-thumb" md-ink-ripple md-ink-ripple-checkbox></div>'+"</div>"+"</div>"+'<div ng-transclude class="md-label"></div>',require:"?ngModel",compile:mdSwitchCompile};function mdSwitchCompile(element,attr){var checkboxLink=checkboxDirective.compile(element,attr).post;element.addClass("md-dragging");return function(scope,element,attr,ngModel){ngModel=ngModel||$mdUtil.fakeNgModel();var disabledGetter=null;if(attr.disabled!=null){disabledGetter=function(){return true}}else if(attr.ngDisabled){disabledGetter=$parse(attr.ngDisabled)}var thumbContainer=angular.element(element[0].querySelector(".md-thumb-container"));var switchContainer=angular.element(element[0].querySelector(".md-container"));$$rAF(function(){element.removeClass("md-dragging")});checkboxLink(scope,element,attr,ngModel);if(disabledGetter){scope.$watch(disabledGetter,function(isDisabled){element.attr("tabindex",isDisabled?-1:0)})}$mdGesture.register(switchContainer,"drag");switchContainer.on("$md.dragstart",onDragStart).on("$md.drag",onDrag).on("$md.dragend",onDragEnd);var drag;function onDragStart(ev){if(disabledGetter&&disabledGetter(scope))return;ev.stopPropagation();element.addClass("md-dragging");drag={width:thumbContainer.prop("offsetWidth")}}function onDrag(ev){if(!drag)return;ev.stopPropagation();ev.srcEvent&&ev.srcEvent.preventDefault();var percent=ev.pointer.distanceX/drag.width;var translate=ngModel.$viewValue?1+percent:percent;translate=Math.max(0,Math.min(1,translate));thumbContainer.css($mdConstant.CSS.TRANSFORM,"translate3d("+100*translate+"%,0,0)");drag.translate=translate}function onDragEnd(ev){if(!drag)return;ev.stopPropagation();element.removeClass("md-dragging");thumbContainer.css($mdConstant.CSS.TRANSFORM,"");var isChanged=ngModel.$viewValue?drag.translate<.5:drag.translate>.5;if(isChanged){applyModelValue(!ngModel.$viewValue)}drag=null;scope.skipToggle=true;$timeout(function(){scope.skipToggle=false},1)}function applyModelValue(newValue){scope.$apply(function(){ngModel.$setViewValue(newValue);ngModel.$render()})}}}}})(window,window.angular);