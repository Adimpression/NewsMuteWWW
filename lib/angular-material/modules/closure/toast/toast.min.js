goog.provide("ngmaterial.components.toast");goog.require("ngmaterial.components.button");goog.require("ngmaterial.core");MdToastDirective.$inject=["$mdToast"];MdToastProvider.$inject=["$$interimElementProvider"];angular.module("material.components.toast",["material.core","material.components.button"]).directive("mdToast",MdToastDirective).provider("$mdToast",MdToastProvider);function MdToastDirective($mdToast){return{restrict:"E",link:function postLink(scope,element){element.addClass("_md");scope.$on("$destroy",function(){$mdToast.destroy()})}}}function MdToastProvider($$interimElementProvider){toastDefaultOptions.$inject=["$animate","$mdToast","$mdUtil","$mdMedia"];var ACTION_RESOLVE="ok";var activeToastContent;var $mdToast=$$interimElementProvider("$mdToast").setDefaults({methods:["position","hideDelay","capsule","parent","position","toastClass"],options:toastDefaultOptions}).addPreset("simple",{argOption:"textContent",methods:["textContent","content","action","highlightAction","highlightClass","theme","parent"],options:["$mdToast","$mdTheming",function($mdToast,$mdTheming){return{template:'<md-toast md-theme="{{ toast.theme }}" ng-class="{\'md-capsule\': toast.capsule}">'+'  <div class="md-toast-content">'+'    <span class="md-toast-text" role="alert" aria-relevant="all" aria-atomic="true">'+"      {{ toast.content }}"+"    </span>"+'    <md-button class="md-action" ng-if="toast.action" ng-click="toast.resolve()" '+'        ng-class="highlightClasses">'+"      {{ toast.action }}"+"    </md-button>"+"  </div>"+"</md-toast>",controller:["$scope",function mdToastCtrl($scope){var self=this;if(self.highlightAction){$scope.highlightClasses=["md-highlight",self.highlightClass]}$scope.$watch(function(){return activeToastContent},function(){self.content=activeToastContent});this.resolve=function(){$mdToast.hide(ACTION_RESOLVE)}}],theme:$mdTheming.defaultTheme(),controllerAs:"toast",bindToController:true}}]}).addMethod("updateTextContent",updateTextContent).addMethod("updateContent",updateTextContent);function updateTextContent(newContent){activeToastContent=newContent}return $mdToast;function toastDefaultOptions($animate,$mdToast,$mdUtil,$mdMedia){var SWIPE_EVENTS="$md.swipeleft $md.swiperight $md.swipeup $md.swipedown";return{onShow:onShow,onRemove:onRemove,toastClass:"",position:"bottom left",themable:true,hideDelay:3e3,autoWrap:true,transformTemplate:function(template,options){var shouldAddWrapper=options.autoWrap&&template&&!/md-toast-content/g.test(template);if(shouldAddWrapper){var templateRoot=document.createElement("md-template");templateRoot.innerHTML=template;for(var i=0;i<templateRoot.children.length;i++){if(templateRoot.children[i].nodeName==="MD-TOAST"){var wrapper=angular.element('<div class="md-toast-content">');wrapper.append(angular.element(templateRoot.children[i].childNodes));templateRoot.children[i].appendChild(wrapper[0])}}return templateRoot.innerHTML}return template||""}};function onShow(scope,element,options){activeToastContent=options.textContent||options.content;var isSmScreen=!$mdMedia("gt-sm");element=$mdUtil.extractElementByName(element,"md-toast",true);options.element=element;options.onSwipe=function(ev,gesture){var swipe=ev.type.replace("$md.","");var direction=swipe.replace("swipe","");if(direction==="down"&&options.position.indexOf("top")!=-1&&!isSmScreen||direction==="up"&&(options.position.indexOf("bottom")!=-1||isSmScreen)){return}if((direction==="left"||direction==="right")&&isSmScreen){return}element.addClass("md-"+swipe);$mdUtil.nextTick($mdToast.cancel)};options.openClass=toastOpenClass(options.position);element.addClass(options.toastClass);options.parent.addClass(options.openClass);if($mdUtil.hasComputedStyle(options.parent,"position","static")){options.parent.css("position","relative")}element.on(SWIPE_EVENTS,options.onSwipe);element.addClass(isSmScreen?"md-bottom":options.position.split(" ").map(function(pos){return"md-"+pos}).join(" "));if(options.parent)options.parent.addClass("md-toast-animating");return $animate.enter(element,options.parent).then(function(){if(options.parent)options.parent.removeClass("md-toast-animating")})}function onRemove(scope,element,options){element.off(SWIPE_EVENTS,options.onSwipe);if(options.parent)options.parent.addClass("md-toast-animating");if(options.openClass)options.parent.removeClass(options.openClass);return(options.$destroy==true?element.remove():$animate.leave(element)).then(function(){if(options.parent)options.parent.removeClass("md-toast-animating");if($mdUtil.hasComputedStyle(options.parent,"position","static")){options.parent.css("position","")}})}function toastOpenClass(position){if(!$mdMedia("gt-xs")){return"md-toast-open-bottom"}return"md-toast-open-"+(position.indexOf("top")>-1?"top":"bottom")}}}ngmaterial.components.toast=angular.module("material.components.toast");